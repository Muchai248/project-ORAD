{% load static %}
<!doctype html>
<html class="no-js" lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Dashboard V.1 |</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- favicon
		============================================ -->
    <link rel="shortcut icon" type="image/x-icon" href="{% static 'img/logo/logo1.jpeg' %}">
    <!-- Google Fonts
		============================================ -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,700,900" rel="stylesheet">
    <!-- Bootstrap CSS
		============================================ -->
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}" />
    <!-- Bootstrap CSS
		============================================ -->
    <link rel="stylesheet" href="{% static 'css/font-awesome.min.css'  %}" />
    <!-- owl.carousel CSS
		============================================ -->
    <link rel="stylesheet" href="{% static 'css/owl.carousel.css' %}">
    <link rel="stylesheet" href="{% static 'css/owl.theme.css'  %}">
    <link rel="stylesheet" href="{% static 'css/owl.transitions.css' %}">
    <!-- animate CSS
		============================================ -->
    <link rel="stylesheet" href="{% static 'css/animate.css' %}">
    <!-- normalize CSS
		============================================ -->
    <link rel="stylesheet" href="{% static 'css/normalize.css' %}">
    <!-- meanmenu icon CSS
		============================================ -->
    <link rel="stylesheet" href="{% static 'css/meanmenu.min.css' %}">
    <!-- main CSS
		============================================ -->
    <link rel="stylesheet" href="{% static  'css/main.css' %}">
    <!-- educate icon CSS
		============================================ -->
    <link rel="stylesheet" href="{%  static 'css/educate-custon-icon.css' %}">
    <!-- morrisjs CSS
		============================================ -->
    <link rel="stylesheet" href="{%  static 'css/morrisjs/jquery.morris.min.css' %}">
    <!-- mCustomScrollbar CSS
		============================================ -->
    <link rel="stylesheet" href="{% static 'css/scrollbar/jquery.mCustomScrollbar.min.css' %}">
    <!-- metisMenu CSS
		============================================ -->
    <link rel="stylesheet" href="{% static 'css/metisMenu/metisMenu.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/metisMenu/metisMenu-vertical.css' %}">
    <!-- calendar CSS
		============================================ -->
    <link rel="stylesheet" href="{% static 'css/calendar/fullcalendar.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/calendar/fullcalendar.print.min.css' %}">
    <!-- style CSS
		============================================ -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <!-- responsive CSS
		============================================ -->
    <link rel="stylesheet" href="{% static 'css/responsive.css' %}">
    <!-- modernizr JS
		============================================ -->
    <script src="{% static 'js/vendor/modernizr-2.8.3.min.js' %}"></script>
    <style> body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    background-color: #f4f4f4;
}

.container {
    max-width: 800px;
    margin: 0 auto;
    padding: 20px;
}

.site-list {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
}

.site-card {
    background-color: #fff;
    border: 1px solid #ccc;
    border-radius: 5px;
    padding: 10px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.upload-button {
    background-color: #007bff;
    color: #fff;
    border: none;
    padding: 8px 16px;
    cursor: pointer;
}

.modal {
    display: none;
    position: fixed;
    z-index: 1;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0, 0, 0, 0.4);
}

.modal-content {
    background-color: #fefefe;
    margin: 20% auto;
    padding: 20px;
    border: 1px solid #888;
    width: 80%;
}

.close {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
}

.close:hover,
.close:focus {
    color: black;
    text-decoration: none;
    cursor: pointer;
}
</style>
</head>

<body>
<div class="all-content-wrappe">
        <div class="header-advance-area">
            <div class="header1-top-area" style=" width: 100%; padding: 10px 0;">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                            <div class="">
                                <div class="row">
                                    <div class="col-lg-6 col-md-7 col-sm-6 col-xs-12">
                                        <div class="header-top-menu tabl-d-n">
                                            <ul class="nav navbar-nav mai-top-nav">
                                                <li class="nav-item"><a href="home" class="nav-link">Home</a>
                                                </li>
                                                <li class="nav-item"><a href="#" class="nav-link">My Files</a>
                                                </li>
                                                <li class="nav-item"><a href="#" class="nav-link">Q.C</a>
                                                </li>
                                                <li class="nav-item"><a href="#" class="nav-link">Documents</a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                </div>
                            </div>
                  </div>
              </div>
            </div>
        </div>


 
</div>
 <div class="container">
        <h1>Site QC Documents</h1>
        <div id="siteList" class="site-list">
            <!-- Site list will be populated dynamically -->
        </div>
    </div>

    <div id="uploadFormModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Upload QC Document</h2>
            <form id="uploadForm">
                <label for="document">Choose file:</label>
                <input type="file" id="document" name="document" required>
                <button type="submit">Upload</button>
            </form>
        </div>
    </div>
 

{% load static %}
    <!-- jquery
		============================================ -->
    <script src="{% static 'js/vendor/jquery-1.12.4.min.js' %}"></script>
    <!-- bootstrap JS
		============================================ -->
    <script src="{% static 'js/bootstrap.min.js' %}"></script>
    <!-- wow JS
		============================================ -->
    <script src="{% static 'js/wow.min.js' %}"></script>
    <!-- price-slider JS
		============================================ -->
    <script src="{% static 'js/jquery-price-slider.js' %}"></script>
    <!-- meanmenu JS
		============================================ -->
    <script src="{% static 'js/jquery.meanmenu.js' %}"></script>
    <!-- owl.carousel JS
		============================================ -->
    <script src="{% static 'js/owl.carousel.min.js' %}"></script>
    <!-- sticky JS
		============================================ -->
    <script src="{% static 'js/jquery.sticky.js' %}"></script>
    <!-- scrollUp JS
		============================================ -->
    <script src="{% static 'js/jquery.scrollUp.min.js' %}"></script>
    <!-- counterup JS
		============================================ -->
    <script src="{% static 'js/counterup/jquery.counterup.min.js' %}" ></script>
    <script src="{% static 'js/counterup/waypoints.min.js' %}"></script>
    <script src="{% static 'js/counterup/counterup-active.js' %}"></script>
    <!-- mCustomScrollbar JS
		============================================ -->
    <script src="{% static 'js/scrollbar/jquery.mCustomScrollbar.concat.min.js' %}"></script>
    <script src="{% static 'js/scrollbar/mCustomScrollbar-active.js' %}"></script>
    <!-- metisMenu JS
		============================================ -->
    <script src="{% static 'js/metisMenu/metisMenu.min.js' %}"></script>
    <script src="{% static 'js/metisMenu/metisMenu-active.js' %}"></script>
    <!-- morrisjs JS
		============================================ -->
    <script src="{% static 'js/morrisjs/raphael-min.js' %}"></script>
    <script src="{% static 'js/morrisjs/morris.js' %}"></script>
    <script src="{% static 'js/morrisjs/morris-active.js' %}"></script>
    <!-- morrisjs JS
		============================================ -->
    <script src="{% static 'js/sparkline/jquery.sparkline.min.js' %}"></script>
    <script src="{% static 'js/sparkline/jquery.charts-sparkline.js' %}"></script>
    <script src="{% static 'js/sparkline/sparkline-active.js' %}"></script>
    <!-- calendar JS
		============================================ -->
    <script src="{% static 'js/calendar/moment.min.js'  %}" ></script>
    <script src="{%  static 'js/calendar/fullcalendar.min.js'  %}" ></script>
    <script src="{% static  'js/calendar/fullcalendar-active.js' %}"></script>
    <!-- plugins JS
		============================================ -->
    <script src="{% static  'js/plugins.js' %}"></script>
    <!-- main JS
		============================================ -->
    <script src="{% static    'js/main.js' %}"></script>
    <script>// Sample site data
const sites = [
    { id: 1, name: 'Tatu City', documents: [] },
    { id: 2, name: 'Mirema', documents: [] },
    { id: 3, name: 'St Joseph', documents: [] }
];

// Function to render the list of sites
function renderSiteList() {
    const siteList = document.getElementById('siteList');
    siteList.innerHTML = ''; // Clear previous content

    sites.forEach(site => {
        const siteCard = document.createElement('div');
        siteCard.classList.add('site-card');
        siteCard.innerHTML = `
            <h3>${site.name}</h3>
            <button class="upload-button" data-id="${site.id}">Upload Document</button>
            <div class="documents"></div>
        `;
        siteList.appendChild(siteCard);

        const uploadButton = siteCard.querySelector('.upload-button');
        uploadButton.addEventListener('click', () => openUploadModal(site.id));
    });
}

// Function to open the upload document modal
function openUploadModal(siteId) {
    const modal = document.getElementById('uploadFormModal');
    const closeButton = modal.querySelector('.close');
    const uploadForm = modal.querySelector('#uploadForm');

    modal.style.display = 'block';

    // Close the modal when the close button is clicked
    closeButton.onclick = () => modal.style.display = 'none';

    // Close the modal when the user clicks outside of it
    window.onclick = (event) => {
        if (event.target === modal) {
            modal.style.display = 'none';
        }
    };

    // Submit the upload form
    uploadForm.onsubmit = (event) => {
        event.preventDefault();
        const fileInput = uploadForm.querySelector('#document');
        const file = fileInput.files[0];
        if (file) {
            uploadDocument(siteId, file);
            modal.style.display = 'none';
            fileInput.value = ''; // Clear the file input
        } else {
            alert('Please select a file to upload.');
        }
    };
}

// Function to upload the document
function uploadDocument(siteId, file) {
    const site = sites.find(site => site.id === siteId);
    site.documents.push({ name: file.name, url: URL.createObjectURL(file) });
    renderDocuments(siteId);
}

// Function to render documents for a site
function renderDocuments(siteId) {
    const siteCard = document.querySelector(`.site-card[data-id="${siteId}"]`);
    const documentsDiv = siteCard.querySelector('.documents');
    documentsDiv.innerHTML = ''; // Clear previous documents

    const site = sites.find(site => site.id === siteId);
    site.documents.forEach(document => {
        const documentLink = document.createElement('a');
        documentLink.href = document.url;
        documentLink.textContent = document.name;
        documentLink.setAttribute('download', '');

        const br = document.createElement('br');

        documentsDiv.appendChild(documentLink);
        documentsDiv.appendChild(br);
    });
}

// Render the site list when the page loads
window.onload = renderSiteList;
</script>

</body>

</html>